<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>30-60-80,000 BCE - The Goddess Times</title>
    <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&family=Playfair+Display:wght@400;700&family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Base styles */
        :root {
            --paper-color: #f8f5ec;
            --text-dark: #2c2416;
            --text-light: #5d4e36;
            --accent-red: #8b0000;
            --accent-gold: #c9a769;
            --border-color: #d4c9b5;
            --highlight-color: #e9e0cc;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Merriweather', serif;
            line-height: 1.6;
            background: #e0d6c0;
            color: var(--text-dark);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
           
            overflow-x: hidden;
        }
        
        .times-paper {
            width: 100%;
            max-width: 1200px;
            background: var(--paper-color);
            border: 1px solid var(--border-color);
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            position: relative;
            padding: 30px;
            z-index: 10;
        }
        
        /* Header Styles */
        .header-bar {
            text-align: center;
            padding: 0 0 15px 0;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--accent-red);
            position: relative;
        }
        
        .date-time-section {
            font-family: 'Libre Baskerville', serif;
            font-size: 1.1rem;
            color: var(--text-light);
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .title-section {
            margin: 20px 0;
        }
        
        .main-title {
            font-family: 'Playfair Display', serif;
            font-size: 5rem;
            font-weight: 700;
            color: var(--text-dark);
            text-transform: uppercase;
            letter-spacing: 3px;
            margin: 0;
            position: relative;
        }
        
        .main-title::after {
            content: "";
            display: block;
            width: 100%;
            height: 2px;
            background: var(--accent-red);
            margin: 10px 0;
        }
        
        .sub-title {
            font-size: 1.3rem;
            color: var(--text-light);
            font-family: 'Libre Baskerville', serif;
            margin: 5px 0;
            font-style: italic;
        }
        
        .era-selector {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 25px 0;
        }
        
        .era-btn {
            padding: 12px 25px;
            background: var(--paper-color);
            border: 1px solid var(--accent-gold);
            color: var(--text-dark);
            font-family: 'Libre Baskerville', serif;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .era-btn:hover, .era-btn.active {
            background: var(--accent-gold);
            color: var(--text-dark);
            border-color: var(--text-dark);
        }
        
        /* Navigation */
        .times-nav {
            display: flex;
            justify-content: center;
            padding: 15px 0;
            margin: 20px 0;
            border-top: 1px solid var(--border-color);
            border-bottom: 1px solid var(--border-color);
            position: relative;
        }
        
        .times-nav a {
            font-family: 'Libre Baskerville', serif;
            text-decoration: none;
            color: var(--text-dark);
            margin: 0 25px;
            font-size: 1.1rem;
            letter-spacing: 0.5px;
            position: relative;
            padding: 5px 10px;
            transition: all 0.3s ease;
        }
        
        .times-nav a:hover {
            color: var(--accent-red);
        }
        
        /* Content Grid */
        .content-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
        }
        
        /* Generation Controls */
        .generation-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .gen-btn {
            padding: 12px 30px;
            background: var(--paper-color);
            border: 1px solid var(--accent-gold);
            color: var(--text-dark);
            font-family: 'Libre Baskerville', serif;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .gen-btn:hover {
            background: var(--accent-gold);
            color: var(--text-dark);
        }
        
        /* Generated Stories */
        .generated-stories {
            border: 1px solid var(--border-color);
            padding: 25px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            position: relative;
        }
        
        .story-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .generated-story {
            background: #fffdf6;
            padding: 25px;
            border: 1px solid var(--border-color);
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .generated-story:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .story-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .story-thumb {
            width: 100px;
            height: 100px;
            border-radius: 2px;
            border: 1px solid var(--border-color);
            margin-right: 15px;
            object-fit: cover;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .story-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .story-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.4rem;
            color: var(--accent-red);
            margin: 0;
            line-height: 1.3;
        }
        
        .story-meta {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-top: 8px;
            font-style: italic;
        }
        
        .story-body {
            font-size: 1rem;
            line-height: 1.7;
            margin-bottom: 20px;
            color: var(--text-dark);
        }
        
        .story-highlight {
            font-weight: bold;
            color: var(--accent-red);
        }
        
        .story-quote {
            font-style: italic;
            padding: 15px;
            background: var(--highlight-color);
            border-left: 3px solid var(--accent-gold);
            margin: 15px 0;
        }
        
        /* Sidebar */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        
        /* Oracle Section */
        .oracle-section {
            border: 1px solid var(--border-color);
            padding: 25px;
            text-align: center;
            background: #fffdf6;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
        }
        
        .oracle-section h3 {
            font-family: 'Playfair Display', serif;
            color: var(--accent-red);
            margin-bottom: 20px;
            font-size: 1.6rem;
        }
        
        .oracle-image {
            max-width: 100%;
            border-radius: 2px;
            border: 1px solid var(--border-color);
            margin-bottom: 15px;
            background: #f8f5ec;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .oracle-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .caption {
            font-style: italic;
            color: var(--text-light);
            font-size: 0.95rem;
            margin-top: 10px;
        }
        
        .oracle-controls {
            margin-top: 20px;
        }
        
        #ask-oracle {
            padding: 10px 25px;
            background: var(--paper-color);
            border: 1px solid var(--accent-gold);
            color: var(--text-dark);
            font-family: 'Libre Baskerville', serif;
            cursor: pointer;
            transition: all 0.05s ease;
            font-size: 1.1rem;
        }

        /* Add this new rule for the active state */
        #ask-oracle:active {
            background: var(--accent-gold);
            /* Add a glow effect */
            box-shadow: 0 0 15px 5px rgba(255, 255, 255, 0.7);
            transform: scale(0.98); /* Optional: makes it feel like it's being pushed */
        }

        #ask-oracle:hover {
            background: var(--accent-gold);
            color: var(--text-dark);
        }
        /* Add this anywhere in your <style> block */

        /* This class will trigger the animation */
        .thunder-flash {
            animation: thunderbolt-animation 0.4s ease-out;
        }

        /* This defines the animation itself */
        @keyframes thunderbolt-animation {
            0% {
                background: var(--paper-color);
                box-shadow: none;
            }
            50% {
                background: #ffffff; /* A bright white flash */
                /* A sharp, bright gold glow */
                box-shadow: 0 0 25px 10px var(--accent-gold), 0 0 10px 5px #fff inset;
            }
            100% {
                background: var(--paper-color);
                box-shadow: none;
            }
        }
        #oracle-response {
            font-size: 1.2rem;
            margin-top: 20px;
            color: var(--accent-red);
            font-family: 'Playfair Display', serif;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-style: italic;
        }
        
        /* Classifieds */
        .classifieds {
            border: 1px solid var(--border-color);
            padding: 30px;
            margin-bottom: 30px;
            background: #fffdf6;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
        }
        
        .classifieds h3 {
            font-family: 'Playfair Display', serif;
            text-align: center;
            color: var(--accent-red);
            margin-bottom: 25px;
            font-size: 1.8rem;
            letter-spacing: 1px;
        }
        
        .classifieds-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }
        
        .ad-item {
            background: #f8f5ec;
            padding: 20px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            font-size: 1.05rem;
            line-height: 1.6;
        }
        
        .ad-item:hover {
            background: var(--highlight-color);
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.08);
        }
       
        .ad-item strong {
            display: block;
            font-family: 'Playfair Display', serif;
            color: var(--accent-red);
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        /* Footer */
        .page-footer {
            padding-top: 30px;
            border-top: 2px solid var(--accent-red);
            position: relative;
        }
        
        .scrolling-ticker {
            background: #f8f5ec;
            border: 1px solid var(--border-color);
            padding: 12px 20px;
            margin-bottom: 25px;
            overflow: hidden;
            white-space: nowrap;
        }
        
        .ticker-content {
            display: inline-block;
            padding-left: 100%;
            animation: ticker-scroll 30s linear infinite;
            font-family: 'Libre Baskerville', serif;
            color: var(--accent-red);
            font-size: 1.1rem;
        }
        
        @keyframes ticker-scroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }
        
        .footer-info {
            text-align: center;
            font-size: 0.95rem;
            color: var(--text-light);
            padding-bottom: 20px;
        }
        
        .affirmation {
            font-style: italic;
            margin-bottom: 15px;
            color: var(--accent-red);
            font-family: 'Playfair Display', serif;
            font-size: 1.2rem;
        }
        
        .print-btn {
            padding: 12px 30px;
            background: var(--paper-color);
            border: 1px solid var(--accent-gold);
            color: var(--text-dark);
            font-family: 'Libre Baskerville', serif;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            margin-top: 15px;
        }
        
        .print-btn:hover {
            background: var(--accent-gold);
            color: var(--text-dark);
        }
        
        /* Obituaries Section */
        .obituaries {
            border: 1px solid var(--border-color);
            padding: 25px;
            margin-top: 30px;
            background: #fffdf6;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
        }
        
        .obituaries h3 {
            font-family: 'Playfair Display', serif;
            color: var(--accent-red);
            margin-bottom: 20px;
            font-size: 1.6rem;
            text-align: center;
        }
        
        .obit-item {
            padding: 15px 0;
            border-bottom: 1px solid var(--border-color);
        }
        
        .obit-item:last-child {
            border-bottom: none;
        }
        
        .obit-name {
            font-family: 'Playfair Display', serif;
            color: var(--text-dark);
            margin-bottom: 8px;
            font-size: 1.3rem;
        }
        
        .obit-details {
            font-size: 1rem;
            color: var(--text-light);
            line-height: 1.6;
        }
        
        /* Responsive Design */
        @media (max-width: 1024px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .main-title {
                font-size: 3.5rem;
            }
            
            .times-nav {
                flex-wrap: wrap;
            }
            
            .times-nav a {
                margin: 5px 10px;
            }
            
            .generation-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .era-selector {
                flex-direction: column;
                gap: 15px;
                align-items: center;
            }
        }
        
        @media (max-width: 480px) {
            .main-title {
                font-size: 2.5rem;
            }
            
            .header-bar {
                padding-bottom: 10px;
            }
            
            .date-time-section {
                font-size: 0.9rem;
            }
        /* ADD THIS RULE */
            .times-paper {
                padding: 15px; /* Reduces the padding on very small screens */
            }

            .content-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .generated-story {
                padding: 15px;
            }

            .story-header {
                flex-direction: column;
                align-items: center;
            }

            .story-thumb {
                margin-bottom: 15px;
            }

            .story-title {
                font-size: 1.5rem;
            }

            .story-meta {
                font-size: 0.8rem;
            }

        }
        
        /* ===== PRINT-FRIENDLY STYLES ===== */
        @media print {
            body, .times-paper {
                background: white !important;
            }
            
            .main-title {
                color: black !important;
            }
            
            .times-nav,
            .generation-controls,
            .era-selector,
            .scrolling-ticker,
            .print-btn {
                display: none !important;
            }
            
            .content-grid {
                grid-template-columns: 1fr;
            }
            
            .generated-story, .times-paper {
                box-shadow: none;
                border: 1px solid #ccc;
            }
            
            .story-body img {
                max-width: 100%;
            }
        }
        
        /* Decorative elements */
        .paper-texture {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" opacity="0.05"><rect fill="none" stroke="black" stroke-width="2" x="0" y="0" width="100" height="100"/></svg>');
            pointer-events: none;
            z-index: -1;
            opacity: 0.1;
        }
        
        .era-indicator {
          
            top: 20px;
            right: 20px;
            background: var(--accent-gold);
            color: var(--text-dark);
            padding: 5px 15px;
            font-family: 'Libre Baskerville', serif;
            font-size: 1.1rem;
            border: 1px solid var(--text-dark);
        }
    </style>
</head>
<body>
    <div class="times-paper">
        <div class="paper-texture"></div>

        
        <div class="header-bar">
            <div class="date-time-section">
                <p id="current-date">MOON CYCLE: WAXING GIBBOUS</p>
                <p id="current-time">SEASON: EARLY SPRING</p>
            </div>
            <div class="title-section">
                <h1 class="main-title">The Goddess Times</h1>
                <p class="sub-title">Chronicles of Our Ancestors from 30,000 to 80,000 BCE</p>
            </div>
            <div class="era-indicator" id="current-era">30,000 BCE</div>

        </div>
        
        <div class="era-selector">
            <button class="era-btn active" data-era="30k">30,000 BCE</button>
            <button class="era-btn" data-era="60k">60,000 BCE</button>
            <button class="era-btn" data-era="80k">80,000 BCE</button>
        </div>
        
        <nav class="times-nav">
            <a href="#">HOME</a>
            <a href="#">ANCESTRAL WISDOM</a>
            <a href="#">SACRED SITES</a>
            <a href="#">MATRILINEAL LINES</a>
            <a href="#">ART & SYMBOLS</a>
        </nav>
        
        <div class="content-grid">
            <div class="main-content">
                <div class="generation-controls">
                    <button class="gen-btn" id="generateBtn">
                        <i class="fas fa-feather-alt"></i> GENERATE STORIES
                    </button>
                    <button class="gen-btn" id="resetBtn">
                        <i class="fas fa-redo"></i> NEW ERA
                    </button>
                </div>
                
                <section id="generated-stories" class="generated-stories">
                    <div class="story-grid">
                        <div class="generated-story">
                            <div class="story-header">
                                <div class="story-thumb">
                                    <img src="https://www.cowboyprinter.com/wp-content/uploads/2025/06/1XqfxO633IKgTUulAe96-3-rw0lv.jpg" alt="Ancient Ancestor">
                                </div>
                                <div>
                                    <h3 class="story-title">Welcome to The Goddess Times</h3>
                                    <div class="story-meta">Oral History Chronicle</div>
                                </div>
                            </div>
                            <div class="story-body">
                                <p>Select an era and click "Generate Stories" to reveal the chronicles of our ancestors. Our stories are woven from the threads of Leonard Shlain's insights, connecting our biological evolution with the sacred feminine.</p>
                                <p>Each era—30,000, 60,000, and 80,000 BCE—reveals unique perspectives on birth, survival, and our relationship with the divine feminine.</p>
                                <p class="story-quote">"In the crucible of childbirth, humanity found its first hero—the Mother."</p>
                            </div>
                        </div>
                    </div>
                </section>
                
                <section class="classifieds">
                    <h3>CLAN NOTICES</h3>
                    <div class="classifieds-grid">
                        <div class="ad-item">
                            <strong>MATRILINEAL GATHERING:</strong> The River Clan invites all daughters of the Star-Mother to the summer solstice ceremony. Bring offerings of grain and ochre.
                        </div>
                        <div class="ad-item">
                            <strong>MIDWIFE SEEKING APPRENTICE:</strong> Wise Woman Grey-Hair requires a young woman of steady hands and strong heart to learn the birthing arts.
                        </div>
                        <div class="ad-item">
                            <strong>LOST:</strong> Sacred birthing amulet carved from mammoth ivory. Reward: three baskets of ripe berries. Inquire at Bear Clan hearth.
                        </div>
                        <div class="ad-item">
                            <strong>WARNING:</strong> Glacial winds approach from the north. Secure shelters and store extra provisions. The Elder Mothers have spoken.
                        </div>
                        <div class="ad-item">
                            <strong>TRADE OFFERED:</strong> Fine woven baskets for quality flint blades. Visit the Weaver's Circle at dawn.
                        </div>
                        <div class="ad-item">
                            <strong>RITUAL ANNOUNCEMENT:</strong> The Ceremony of First Blood will commence at the full moon. All women of age are called to the Cave of Origins.
                        </div>
                    </div>
                </section>
                
                <section class="obituaries">
                    <h3>HONORED ANCESTORS</h3>
                    <div class="obit-item">
                        <div class="obit-name">GRANDMOTHER WILLOW</div>
                        <div class="obit-details">Passed peacefully in her sleep during the last moon cycle. She brought 37 children into the world without loss. Survived by four daughters and their clans. Her spirit now watches from the Great Oak.</div>
                    </div>
                    <div class="obit-item">
                        <div class="obit-name">FIRE-KEEPER BRAN</div>
                        <div class="obit-details">Succumbed to the coughing sickness after tending the eternal flame for 40 summers. His knowledge of sacred fire is carried by his apprentice, Ember.</div>
                    </div>
                    <div class="obit-item">
                        <div class="obit-name">LITTLE BIRD</div>
                        <div class="obit-details">Daughter of She-Who-Sings, born during the great storm and returned to the sky after three winters. Her laughter echoes in the valley mists.</div>
                    </div>
                </section>
            </div>
            
            <div class="sidebar">
                <section class="oracle-section">
                    <h3>ORACLE OF THE GODDESS</h3>
                    <div class="oracle-image">
                        <img id="oracle-img" src="https://www.cowboyprinter.com/wp-content/uploads/2025/06/R5alktdkCGZkykBqBTKs-0-85ybz.jpg" alt="Oracle">
                    </div>
                    <p id="oracle-caption" class="caption">Seek wisdom from the ancestors</p>
                    <div class="oracle-controls">
                        <button id="ask-oracle">CONSULT THE ORACLE</button>
                        <p id="oracle-response">What guidance do you seek?</p>
                    </div>
                </section>
            </div>
        </div>
        
        <footer class="page-footer">
            <div class="scrolling-ticker">
                <div class="ticker-content">
                    <span>WEATHER: Spring rains nourish the valley +++ Caribou herds migrating north +++ Sacred mushrooms appearing near the elder grove +++ Birth of twins to the Bear Clan matriarch +++</span>
                </div>
            </div>
            <div class="footer-info">
                <p class="affirmation">"She who remembers the ancestors holds the future in her hands."</p>
                <p>© <span id="current-year">30,000 BCE</span> The Goddess Times | Recorded by the Line of the Star-Mother</p>
                <p>Preserved at the Cave of Ancestors, River Valley</p>
                <button class="print-btn" onclick="window.print()">
                    <i class="fas fa-print"></i> PRESERVE THIS EDITION
                </button>
            </div>
        </footer>
    </div>
    
    <script>
    // ===== GAME STATE MANAGEMENT =====
    class GameState {
        constructor() {
            this.stateKey = 'goddessTimesState';
            this.initialize();
        }
        
        initialize() {
            this.state = {
                era: '30k',
                day: 0,
                past_events: ["a time of great stillness"],
                character_status: {},
                location_status: {"Cave of Origins": "sacred"},
                character_list: [],
                setting_list: [],
                event_list: []
            };
        }
        
        save() {
            localStorage.setItem(this.stateKey, JSON.stringify(this.state));
            console.log("[INFO] Game state saved to localStorage");
        }
        
        load() {
            const savedState = localStorage.getItem(this.stateKey);
            if (savedState) {
                try {
                    this.state = JSON.parse(savedState);
                    console.log("[INFO] Game state loaded from localStorage");
                } catch (e) {
                    console.log("[WARNING] Initializing fresh state");
                    this.initialize();
                }
            } else {
                console.log("[INFO] No saved state found, initializing fresh");
                this.initialize();
            }
        }
        
        add_event(event) {
            if (this.state.past_events.length >= 3) {
                this.state.past_events.shift();
            }
            this.state.past_events.push(event.event_action_past || "Unknown Event");
            this.save();
        }
        
        reset() {
            localStorage.removeItem(this.stateKey);
            this.initialize();
            console.log("[INFO] Game state reset");
        }
        
        setEra(era) {
            this.state.era = era;
            this.state.day = 0;
            this.state.past_events = ["the beginning of a new era"];
            this.save();
            updateEraIndicator();
        }
    }

    // ===== DATA SOURCES =====
    const data = {
        // ... your character, settings, and event data remains here ...
        characters_30k: [ { "name": "Star-Mother Anya", "type": "Matriarch & Sky-Bride", "trait": "bearing the mark of the Sky-God", "goal": "guiding her lineage with celestial wisdom", "quote": "Our blood carries the light of the stars." }, { "name": "Grey-Hair", "type": "Clan Midwife", "trait": "hands that have delivered countless children", "goal": "preserving the sacred knowledge of birth", "quote": "Each birth is a battle won for our people." }, { "name": "Ochre-Hand", "type": "Cave Painter", "trait": "capturing the spirit world on stone", "goal": "recording our stories for generations to come", "quote": "The walls remember when memory fades." }, { "name": "She-Who-Sings", "type": "Ritual Chantress", "trait": "voice that calls the spirits", "goal": "maintaining harmony between worlds", "quote": "The song is the bridge between earth and sky." } ],
        settings_30k: [ { "name": "Cave of Origins", "description": "the sacred birthplace of our people", "feature": "walls painted with the story of the Sky-God's descent", "atmosphere": "filled with the whispers of ancestors" }, { "name": "Mammoth Bone Hearth", "description": "the central gathering place", "feature": "the eternal flame tended by Fire-Keeper", "atmosphere": "warm with stories and shared meals" }, { "name": "Birthing Hut", "description": "the sacred space of creation", "feature": "woven screens depicting the Goddess", "atmosphere": "charged with the energy of life and struggle" } ],
        events_30k: [ { "event_type": "Sky-God's Descent", "event_action_past": "descended from the winter stars", "event_object_catalyst": "in a chariot of fire and light", "event_consequence": "with the First Matriarch now carrying star-blood", "weather": "the night of the falling stars" }, { "event_type": "Sacred Birth", "event_action_past": "brought forth new life", "event_object_catalyst": "after three days of labor", "event_consequence": "with mother and child surviving against all odds", "weather": "the first spring thaw" }, { "event_type": "Spirit Mask Creation", "event_action_past": "woven the sacred breath protector", "event_object_catalyst": "from marsh reeds and mammoth hair", "event_consequence": "with the Elder Mother protected from the choking winds", "weather": "great dust storms from the glacier" }, { "event_type": "Ancestral Vision", "event_action_past": "received wisdom in dreamtime", "event_object_catalyst": "during the mushroom ceremony", "event_consequence": "with new hunting grounds revealed", "weather": "the night of the blue moon" } ],
        templates_30k: [ "Amidst {setting_description} with its {setting_feature}, {character_name} the {character_type} witnessed the {event_type}. Known for {character_trait}, she understood this was a sign. '{character_quote}' she declared. The clan now sees {event_consequence}. This echoes the wisdom from {previous_event}.", "At {setting_name}, where {setting_atmosphere} fills the air, {character_name} the {character_type} experienced the {event_type}. With her talent for {character_trait}, she interpreted the meaning. 'We must remember {event_object_catalyst},' she explained. Now {event_consequence}. The Elder Mothers recall {previous_event}.", "During {weather} at {setting_name}, {character_name} the {character_type} guided the clan through the {event_type}. Renowned for {character_trait}, she knew {character_goal} was essential. '{character_quote}' she chanted. The result: {event_consequence}. This connects to the time when {previous_event}." ],
        characters_60k: [ { "name": "Mountain-Mother", "type": "Clan Founder", "trait": "carrying the original star-blood", "goal": "leading her people through the ice", "quote": "We carry the fire of creation within us." }, { "name": "Flint-Shaper", "type": "Tool Maker", "trait": "hands that speak with stone", "goal": "crafting tools for survival", "quote": "The stone remembers the hand that shapes it." }, { "name": "Story-Weaver", "type": "Oral Historian", "trait": "memory spanning generations", "goal": "preserving the lineage of the Sky-Bride", "quote": "Our stories are the roots that anchor us." }, { "name": "Root-Digger", "type": "Plant Knower", "trait": "understanding the green world", "goal": "finding medicine and nourishment", "quote": "Every plant holds a secret for those who listen." } ],
        settings_60k: [ { "name": "Glacial Passage", "description": "the treacherous path through ice mountains", "feature": "the sacred ice cave where the Sky-God first appeared", "atmosphere": "echoing with the voices of the ice spirits" }, { "name": "Forest Sanctuary", "description": "the hidden grove of ancient trees", "feature": "the birthing stones where generations entered the world", "atmosphere": "filled with the scent of pine and safety" }, { "name": "River of Tears", "description": "the life-giving water source", "feature": "the painted cliffs showing our history", "atmosphere": "flowing with memories of those who passed" } ],
        events_60k: [ { "event_type": "Great Migration", "event_action_past": "led the people south", "event_object_catalyst": "following the reindeer herds", "event_consequence": "with new lands found beyond the ice", "weather": "the great melting" }, { "event_type": "Spirit Cave Discovery", "event_action_past": "found the whispering cave", "event_object_catalyst": "during the vision quest", "event_consequence": "with new connection to the ancestors", "weather": "the time of earth tremors" }, { "event_type": "Birth of Twins", "event_action_past": "delivered two new lives", "event_object_catalyst": "with the midwife's ancient knowledge", "event_consequence": "with both mother and children surviving", "weather": "the night of the double moon" }, { "event_type": "Star-Fire Ceremony", "event_action_past": "conducted the sky ritual", "event_object_catalyst": "at the sacred stone circle", "event_consequence": "with visions of the Sky-God's return", "weather": "the shower of falling stars" } ],
        templates_60k: [ "In the time of {weather}, at {setting_name} where {setting_feature} stands, {character_name} the {character_type} led the {event_type}. Her {character_trait} proved vital. '{character_quote}' she reminded the people. This led to {event_consequence}. The story-weavers sing of {previous_event}.", "While {event_action_past} at {setting_description}, {character_name} the {character_type} demonstrated her {character_trait}. '{character_quote}' she proclaimed. The outcome was {event_consequence}. This event recalls when {previous_event}, as told by the elders.", "At {setting_name}, under {weather} skies, the {event_type} unfolded. {character_name} the {character_type}, known for {character_trait}, took action. '{character_quote}' she sang. Thus {event_consequence}. This resonates with the ancient tale of {previous_event}." ],
        characters_80k: [ { "name": "First Mother", "type": "Original Sky-Bride", "trait": "bearing the mark of the Sky-God", "goal": "establishing the matrilineal line", "quote": "Our children carry the future in their bones." }, { "name": "Cave-Watcher", "type": "Boundary Keeper", "trait": "eyes that see in deepest dark", "goal": "protecting the clan from predators", "quote": "The night holds both danger and promise." }, { "name": "Fire-Tender", "type": "Sacred Flame Guardian", "trait": "keeping the eternal fire alive", "goal": "maintaining the heart of the clan", "quote": "The flame connects us to the first spark." }, { "name": "Skin-Stitcher", "type": "Cloth Maker", "trait": "hands that transform hide", "goal": "protecting the clan from the elements", "quote": "Each stitch is a prayer for warmth." } ],
        settings_80k: [ { "name": "Sky-God's Landing", "description": "the scorched valley of first contact", "feature": "the glass mountain formed by celestial fire", "atmosphere": "charged with otherworldly energy" }, { "name": "Birthing Valley", "description": "the protected sanctuary", "feature": "the ancient midwife stone", "atmosphere": "filled with the cries of new life" }, { "name": "Ancestor Mounds", "description": "the sacred burial grounds", "feature": "the standing stones that mark lineages", "atmosphere": "heavy with the presence of the departed" } ],
        events_80k: [ { "event_type": "First Contact", "event_action_past": "descended in light and thunder", "event_object_catalyst": "from the winter stars", "event_consequence": "with the First Mother chosen as Sky-Bride", "weather": "the night without darkness" }, { "event_type": "Sacred Union", "event_action_past": "joined with the Sky-God", "event_object_catalyst": "on the glass mountain", "event_consequence": "with the star-blood now in human veins", "weather": "the time of celestial alignment" }, { "event_type": "Great Survival", "event_action_past": "endured the trial of birth", "event_object_catalyst": "with the midwives' ancient knowledge", "event_consequence": "with the first star-child entering the world", "weather": "the great blizzard" }, { "event_type": "Goddess Carving", "event_action_past": "shaped the first Venus", "event_object_catalyst": "from sacred mammoth ivory", "event_consequence": "with the divine feminine form honored", "weather": "the long night of creation" } ],
        templates_80k: [ "In the dawn time, when {weather} covered the land, {character_name} the {character_type} experienced the {event_type}. Her {character_trait} allowed her to comprehend. '{character_quote}' she whispered. The consequence: {event_consequence}. This moment echoes the primordial {previous_event}.", "At the sacred {setting_name}, during {weather}, the {event_type} occurred. {character_name} the {character_type}, blessed with {character_trait}, understood. '{character_quote}' she revealed. From this came {event_consequence}. The ancestors remember when {previous_event}.", "When {event_action_past} at {setting_description}, {character_name} the {character_type} used her {character_trait} to guide us. '{character_quote}' she taught. This resulted in {event_consequence}. The lineage holders recall how {previous_event} shaped this moment." ]
    };

    // ===== IMAGE RESOURCES =====
    const headerThumbnails = [ "https://www.cowboyprinter.com/wp-content/uploads/2025/06/1XqfxO633IKgTUulAe96-3-rw0lv.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/1XqfxO633IKgTUulAe96-1-wzlzj.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/1XqfxO633IKgTUulAe96-2-fx8vz.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/1XqfxO633IKgTUulAe96-4-3ekpi.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/1XqfxO633IKgTUulAe96-5-0awfi.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/1XqfxO633IKgTUulAe96-6-9r5d5.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/1XqfxO633IKgTUulAe96-7-osbqj.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/1XqfxO633IKgTUulAe96-8-qnrck.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/SpUk3NLBREIk2Nc1nSez-0-m8h1x.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/SpUk3NLBREIk2Nc1nSez-1-m04cg.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/SpUk3NLBREIk2Nc1nSez-2-hi04e.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/SpUk3NLBREIk2Nc1nSez-4-o107x.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/SpUk3NLBREIk2Nc1nSez-6-5ympn.jpg" ];
    const storyBodyImages = { "30k": [ "https://www.cowboyprinter.com/wp-content/uploads/2025/06/LUm0CZx75s9FT8b3MKan-6-vo4y9.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/NAWUB8mkQrDmSBC9QwrC-0-23221.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/NAWUB8mkQrDmSBC9QwrC-1-j6dg5.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/NAWUB8mkQrDmSBC9QwrC-2-39dut.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/NAWUB8mkQrDmSBC9QwrC-3-pav59.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/NAWUB8mkQrDmSBC9QwrC-4-quayh.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/NAWUB8mkQrDmSBC9QwrC-5-r43h2.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/NAWUB8mkQrDmSBC9QwrC-6-81y5v.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/NAWUB8mkQrDmSBC9QwrC-7-qlfmd.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/NAWUB8mkQrDmSBC9QwrC-8-hbef1.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/BC61BLT83SD5YN2UYsWj-0-alr6y.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/BC61BLT83SD5YN2UYsWj-1-qnrxv.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/BC61BLT83SD5YN2UYsWj-2-nm5qd.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/BC61BLT83SD5YN2UYsWj-3-a4p2r.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/BC61BLT83SD5YN2UYsWj-4-8kt4k.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/BC61BLT83SD5YN2UYsWj-5-7gmhp.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/BC61BLT83SD5YN2UYsWj-6-ibvwv.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/BC61BLT83SD5YN2UYsWj-7-zqjv8.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/BC61BLT83SD5YN2UYsWj-8-rnntq.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/5yHPLfvHJXKOo7X7VdS6-0-cy6dr.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/5yHPLfvHJXKOo7X7VdS6-1-in5xq.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/5yHPLfvHJXKOo7X7VdS6-2-a9czm.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/5yHPLfvHJXKOo7X7VdS6-3-lhk70.jpg" ], "60k": [ "https://www.cowboyprinter.com/wp-content/uploads/2025/06/5yHPLfvHJXKOo7X7VdS6-4-182gs.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/5yHPLfvHJXKOo7X7VdS6-5-eoyml.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/5yHPLfvHJXKOo7X7VdS6-6-5nonz.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/5yHPLfvHJXKOo7X7VdS6-7-7ll77.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/5yHPLfvHJXKOo7X7VdS6-8-6c2v8.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/IbeGkBnsfdr5UG90Qa5u-0-kztvz.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/IbeGkBnsfdr5UG90Qa5u-1-ztqub.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/IbeGkBnsfdr5UG90Qa5u-2-9yva7.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/IbeGkBnsfdr5UG90Qa5u-3-kcktg.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/IbeGkBnsfdr5UG90Qa5u-4-ryyxq.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/IbeGkBnsfdr5UG90Qa5u-5-z4c8g.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/IbeGkBnsfdr5UG90Qa5u-6-lggpv.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/IbeGkBnsfdr5UG90Qa5u-7-xphzi.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/IbeGkBnsfdr5UG90Qa5u-8-mt0au.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/TxG4gsu3qcKPwbuHprEA-0-5i032.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/TxG4gsu3qcKPwbuHprEA-1-ay216.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/TxG4gsu3qcKPwbuHprEA-2-srhix.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/TxG4gsu3qcKPwbuHprEA-3-st7vz.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/TxG4gsu3qcKPwbuHprEA-4-sr58v.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/TxG4gsu3qcKPwbuHprEA-5-pfepb.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/TxG4gsu3qcKPwbuHprEA-6-mzkuo.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/TxG4gsu3qcKPwbuHprEA-7-4hxf3.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/TxG4gsu3qcKPwbuHprEA-8-02908.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/KyTg3slhTIwFc4q2WugB-8-pn1kz.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/KyTg3slhTIwFc4q2WugB-7-47ytb.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/KyTg3slhTIwFc4q2WugB-6-47kgk.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/KyTg3slhTIwFc4q2WugB-5-ydsd4.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/KyTg3slhTIwFc4q2WugB-4-xbmme.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/KyTg3slhTIwFc4q2WugB-3-110ko.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/KyTg3slhTIwFc4q2WugB-2-ivk1v.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/KyTg3slhTIwFc4q2WugB-1-dze8m.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/KyTg3slhTIwFc4q2WugB-0-5mhqj.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/1XqfxO633IKgTUulAe96-0-sp9o6.jpg" ], "80k": [ "https://www.cowboyprinter.com/wp-content/uploads/2025/06/SpUk3NLBREIk2Nc1nSez-3-e3pn8.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/SpUk3NLBREIk2Nc1nSez-7-5hn4x.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/SpUk3NLBREIk2Nc1nSez-8-wkm7m.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/KqH5OmsCHz4SoTycfIBq-8-4kea5.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/KqH5OmsCHz4SoTycfIBq-7-8si5a.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/KqH5OmsCHz4SoTycfIBq-6-bsk6b.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/KqH5OmsCHz4SoTycfIBq-5-4m7oe.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/R5alktdkCGZkykBqBTKs-1-69h31.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/KqH5OmsCHz4SoTycfIBq-4-weowa.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/KqH5OmsCHz4SoTycfIBq-3-wrvzk.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/KqH5OmsCHz4SoTycfIBq-2-m45mj.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/KqH5OmsCHz4SoTycfIBq-1-1e4bc.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/KqH5OmsCHz4SoTycfIBq-0-g043h.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/R5alktdkCGZkykBqBTKs-3-4d7z3.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/R5alktdkCGZkykBqBTKs-5-mkokl.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/LUm0CZx75s9FT8b3MKan-0-ybjms.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/LUm0CZx75s9FT8b3MKan-1-7ostq.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/LUm0CZx75s9FT8b3MKan-2-xgitb.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/LUm0CZx75s9FT8b3MKan-3-494l6.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/LUm0CZx75s9FT8b3MKan-5-tkkt0.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/LUm0CZx75s9FT8b3MKan-7-pmnm6.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/LUm0CZx75s9FT8b3MKan-8-6kxkt.jpg" ] };
    const cartoonImages = [ "https://www.cowboyprinter.com/wp-content/uploads/2025/06/R5alktdkCGZkykBqBTKs-0-85ybz.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/R5alktdkCGZkykBqBTKs-2-bgfz4.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/R5alktdkCGZkykBqBTKs-4-u5lwl.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/R5alktdkCGZkykBqBTKs-6-qfa9a.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/R5alktdkCGZkykBqBTKs-7-kjupr.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/R5alktdkCGZkykBqBTKs-8-0vdd3.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/18tunsZmlrlSgrHx5Vzc-0-in4x6.jpg", "https://www.cowboyprinter.com/wp-content/uploads/2025/06/XNQMM2yX8zIbPPlh7sGj-0-aon40.jpg" ];
    const cartoonCaptions = [ "Cave men are so stupid, they don't have fire yet", "When you realize your cave man's wallet is just a rock", "What do you call a cave man without a goddess? Homeless.", "Kids these days, they don't even know how to paint a cave", "Just another day in paradise", "When you realize you forgot to record your entire civilization", "My oracle predicted this would happen", "Why I always wear gheadgear to work", "When kids have eaten but you're still hungry", "How I explain alieans to my kids", "Why I never trust a man in a cave", "My reaction to the latest comet of doom", "When the signs say it's the end and you're just getting started" ];

    // ===== STORY GENERATION FUNCTIONS =====
    function getRandomElement(array) {
        return array[Math.floor(Math.random() * array.length)];
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function generateStorySnippet(gameState) {
        const era = gameState.state.era;
        const characters = data[`characters_${era}`] || [];
        const settings = data[`settings_${era}`] || [];
        const events = data[`events_${era}`] || [];
        const templates = data[`templates_${era}`] || [];
        
        if (characters.length === 0 || settings.length === 0 || events.length === 0 || templates.length === 0) {
            return {
                story: "No data available for this era.", event: null, setting: null, character: null
            };
        }

        const character = getRandomElement(characters);
        const setting = getRandomElement(settings);
        const event = getRandomElement(events);
        const template = getRandomElement(templates);

        const previous_event = gameState.state.past_events.length > 0 ? 
            gameState.state.past_events[gameState.state.past_events.length - 1] : 
            "the time before memory";

        const storyData = {
            setting_name: setting.name || "Unknown", setting_description: setting.description || "", setting_feature: setting.feature || "", setting_atmosphere: setting.atmosphere || "",
            character_name: character.name || "Unknown", character_type: character.type || "", character_trait: character.trait || "", character_goal: character.goal || "", character_quote: character.quote || "",
            event_type: event.event_type || "", event_object_catalyst: event.event_object_catalyst || "", event_consequence: event.event_consequence || "", event_action_past: event.event_action_past || "",
            weather: event.weather || "a time of balance", previous_event: previous_event, location_status: "sacred"
        };

        try {
            return {
                story: template.replace(/\{(\w+)\}/g, (_, key) => storyData[key]),
                event: event, setting: setting, character: character
            };
        } catch (e) {
            return { story: `[ERROR] Formatting error: ${e}`, event: null, setting: null, character: null };
        }
    }

    function updateOracle() {
        const oracleImg = document.getElementById('oracle-img');
        const caption = document.getElementById('oracle-caption');
        
        const randomIndex = Math.floor(Math.random() * cartoonImages.length);
        oracleImg.src = cartoonImages[randomIndex];
        oracleImg.alt = "Oracle of the Goddess";
        caption.textContent = cartoonCaptions[randomIndex];
    }

    function generateStories() {
        const container = document.getElementById('generated-stories');
        container.innerHTML = '';
        
        gameState.state.day++;
        const dayHeader = document.createElement('h3');
        dayHeader.style.textAlign = 'center';
        dayHeader.style.color = '#8b0000';
        dayHeader.style.margin = '0 0 20px 0';
        dayHeader.style.fontFamily = "'Playfair Display', serif";
        dayHeader.style.fontSize = '1.6rem';
        dayHeader.innerHTML = `<i class="fas fa-scroll"></i> ERA CHRONICLES ${gameState.state.day}`;
        container.appendChild(dayHeader);

        const storyGrid = document.createElement('div');
        storyGrid.className = 'story-grid';
        container.appendChild(storyGrid);
        
        const shuffledHeaderThumbs = [...headerThumbnails];
        shuffleArray(shuffledHeaderThumbs);
        
        const eraImages = storyBodyImages[gameState.state.era] || [];
        
        for (let i = 0; i < 3; i++) {
            const {story, event, setting, character} = generateStorySnippet(gameState);
            
            const storyElement = document.createElement('div');
            storyElement.className = 'generated-story';

            storyElement.innerHTML = `
                <div class="story-header">
                    <div class="story-thumb">
                        <img src="${shuffledHeaderThumbs[i % shuffledHeaderThumbs.length]}" alt="${character.name}">
                    </div>
                    <div>
                        <h3 class="story-title">${event.event_type}</h3>
                        <div class="story-meta">${setting.name} • ${event.weather}</div>
                    </div>
                </div>
                <div class="story-body">
                    <img src="${eraImages[i % eraImages.length]}" alt="A scene from the story" style="width:100%; margin-bottom:20px; border:1px solid #d4c9b5;">
                    ${story}
                </div>
                <div class="story-quote">
                    "${character.quote}"
                </div>
            `;

            storyGrid.appendChild(storyElement);
            gameState.add_event(event);
        }
        
        updateOracle();
    }

    function updateEraIndicator() {
        const eraNames = {
            '30k': '30,000 BCE', '60k': '60,000 BCE', '80k': '80,000 BCE'
        };
        document.getElementById('current-era').textContent = eraNames[gameState.state.era];
    }

    // ===== SCRIPT INITIALIZATION =====
    const gameState = new GameState();
    gameState.load();

    // ===== ALL EVENT HANDLERS GO INSIDE THIS SINGLE DOMCONTENTLOADED BLOCK =====
    document.addEventListener('DOMContentLoaded', function() {
        
        // --- Get references to all interactive elements ---
        const generateBtn = document.getElementById('generateBtn');
        const resetBtn = document.getElementById('resetBtn');
        const dateElement = document.getElementById('current-date');
        const timeElement = document.getElementById('current-time');
        const yearElement = document.getElementById('current-year');
        const oracleButton = document.getElementById('ask-oracle');
        const oracleResponse = document.getElementById('oracle-response');
        const thunderSound = document.getElementById('thunder-sound');

        // --- Define data arrays needed for events ---
        const oracleResponses = [
            "The Goddess smiles upon your path", "Seek wisdom in the cave of your ancestors",
            "The stars foretell a time of abundance", "Trust in the lineage of the mothers",
            "A new life will bring great joy", "The birthing stones hold your answer",
            "Remember the strength of the First Mother", "Your path is lit by the moon's glow",
            "The spirits of the earth guide you", "The sacred mushroom will reveal truth"
        ];

        // --- Initial page setup function ---
        function updateDateTime() {
            const seasons = ['Deep Winter', 'Early Spring', 'Late Spring', 'Early Summer', 'High Summer', 'Late Summer', 'Early Autumn', 'Late Autumn', 'Early Winter'];
            const moonPhases = ['New Moon', 'Waxing Crescent', 'First Quarter', 'Waxing Gibbous', 'Full Moon', 'Waning Gibbous', 'Last Quarter', 'Waning Crescent'];
            
            dateElement.textContent = `MOON CYCLE: ${getRandomElement(moonPhases)}`;
            timeElement.textContent = `SEASON: ${getRandomElement(seasons)}`;
            
            if (yearElement) {
                yearElement.textContent = gameState.state.era === '30k' ? '30,000 BCE' : 
                                      gameState.state.era === '60k' ? '60,000 BCE' : '80,000 BCE';
            }
        }
        
        // --- Run initial setup functions ---
        updateOracle();
        updateEraIndicator();
        updateDateTime();

        // --- Attach Event Listeners ---
        
        generateBtn.addEventListener('click', generateStories);

        resetBtn.addEventListener('click', () => {
            gameState.reset();
            document.getElementById('generated-stories').innerHTML =
                '<div class="story-grid"><div class="generated-story"><div class="story-body"><p>Select an era and generate stories to begin chronicling our ancestors\' journey.</p></div></div></div>';
            updateEraIndicator();
        });

        document.querySelectorAll('.era-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.era-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                gameState.setEra(this.dataset.era);
                updateDateTime();
            });
        });

        oracleButton.addEventListener('click', function() {
            if (thunderSound) {
                thunderSound.currentTime = 0;
                thunderSound.play();
            }
            this.classList.add('thunder-flash');
            setTimeout(() => { this.classList.remove('thunder-flash'); }, 400);

            oracleResponse.textContent = getRandomElement(oracleResponses);
            oracleResponse.style.opacity = 0;
            setTimeout(() => {
                oracleResponse.style.transition = 'opacity 1s';
                oracleResponse.style.opacity = 1;
            }, 10);
        });
    });
</script>

<audio id="thunder-sound" src="https://www.cowboyprinter.com/wp-content/uploads/2025/06/oracle_thunder.mp3" preload="auto"></audio>

</body>
</html>